"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.authorizeUserLocation=void 0;var _index=require("../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_lodash=require("../npm/lodash/lodash.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var authorizeUserLocation=exports.authorizeUserLocation=function(t,e){var o=1<arguments.length&&void 0!==e&&e;if(!_index2.default.getSetting)return _index2.default.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。",confirmColor:"#13A4AF",showCancel:!1}),!1;_index2.default.getSetting({success:function(e){if((e.authSetting||{})["scope.userLocation"]&&t&&(0,_lodash.isFunction)(t))return t({status:"success"}),!1;if(!o){try{_index2.default.getLocation({type:"wgs84",success:function(){t&&(0,_lodash.isFunction)(t)&&t({status:"success"})},fail:function(){t&&(0,_lodash.isFunction)(t)&&t({status:"fail"})}})}catch(e){console.error(e)}return!1}_index2.default.showModal({title:"",content:"您需要授权地理位置信息，才能\n继续操作哦~",confirmColor:"#1FC756",success:function(e){e.confirm&&_index2.default.openSetting({success:function(e){e.authSetting["scope.userLocation"]&&t&&(0,_lodash.isFunction)(t)&&t({status:"success"})},fail:function(){_index2.default.showModal({title:"",content:"尝试打开授权设置失败，请\n手动开启：菜单-关于同程分期游戏-菜单-设置-授权地理位置",confirmColor:"#13A4AF",showCancel:!1})}})},fail:function(){_index2.default.showModal({title:"",content:"出错了，再试一次吧~",confirmColor:"#13A4AF",showCancel:!1})}})},fail:function(){_index2.default.showModal({title:"",content:"出错了，再试一次吧~",confirmColor:"#13A4AF",showCancel:!1})}})};