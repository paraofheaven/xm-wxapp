!function(r,e,i,c,t){"use strict";i.defineProperty(r,"__esModule",{value:!0}),r.reLaunch=r.navigateBack=r.switchTab=r.redirectTo=r.navigateTo=r.getUrlQueryString=r.getQueryString=r.getCurrentPageUrlWithArgs=r.getCurrentPageUrl=r.getCurrentPage=r.appendUrlParameter=r.removeQueryString=r.modifyQueryString=r.normalize=r.getSerializedUrl=r.toQueryString=r.parseParamToObj=r.parseUrlParamToObj=r.getURLSearchParamStr=r.isHttpUrl=void 0;var n,o=e("./wxPromisify.js"),u=e("../npm/lodash/lodash.js"),a=e("../npm/@tarojs/taro-weapp/index.js"),g=(n=a)&&n.__esModule?n:{default:n};function l(e,t,r){var n=U("env")||g.default.getStorageSync("env")||"prod",a=U("media")||"index";return t=(0,u.extend)(!0,{env:n,media:a},t),i.keys(t).forEach(function(r){e=y(r,t[r],e)}),(0,o.wxPromisify)(r,{url:e})}var f=r.isHttpUrl=function(r){return r&&(0===r.indexOf("//")||new t("(https|http|ftp)?://").test(r))},s=r.getURLSearchParamStr=function(r){if(!r)return"";var e=r.split("?")[1]||"";return e?e.replace(/#\/.*/,""):""},p=r.parseUrlParamToObj=function(r){var e=s(r);return e?e.split("&").reduce(function(r,e){var t=e.indexOf("="),n=(-1!==t?[e.substr(0,t),e.substr(t+1)]:[e]).map(function(r){return decodeURIComponent(r.replace("+"," "))});return r[n[0]]=n[1],r},{}):{}},v=r.parseParamToObj=function(r){return-1===r.indexOf("?")?p("?"+r):p(r)},d=r.toQueryString=function(r){var e=[];for(var t in r)if(r.hasOwnProperty(t)){var n=r[t];n?e.push(encodeURIComponent(t)+"="+encodeURIComponent(n)):e.push(encodeURIComponent(t)+"=")}return e.join("&")},h=r.getSerializedUrl=function(r,e){var t=d(e);return t?r.split("?")[0]+"?"+t:r.split("?")[0]},m=(r.normalize=function(r){for(var e=arguments.length,t=c(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var a=r&&r.split("?")[1]||"",i=r?r.split("?")[0]:"";f(i)?i=i.replace(/\/*$/,"/"):i&&(t.unshift(i),i="");var o=[];t.forEach(function(r){var e=r?r.replace(/^\/+|\/+$/gi,""):"";e&&o.push(e)});var u=i+o.join("/").replace(/\/{2,}/gi,"/");return a?u+"?"+a:u},r.modifyQueryString=function(r,e){var t=p(r=r||""),n=r.match(/#\/.*/);for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);var i=r.split("?")[0];return(d(t)?i+"?"+d(t):""+i)+(n?n[0]:"")}),y=(r.removeQueryString=function(r,e){var t=p(r=r||""),n=r.match(/#\/.*/);delete t[e];var a=r.split("?")[0];return(d(t)?a+"?"+d(t):""+a)+(n?n[0]:"")},r.appendUrlParameter=function(r,e,t){return m(t,function(r,e,t){return e in r?i.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}({},r,e))}),P=r.getCurrentPage=function(){var r=g.default.getCurrentPages();return r.length?r[r.length-1]:{}},U=(r.getCurrentPageUrl=function(){return P().route},r.getCurrentPageUrlWithArgs=function(){var r=P(),e=r.route,t=r.options;return h(e,t)},r.getQueryString=function(r){var e=P().options;return e&&e[r]?decodeURIComponent(e[r]):void 0}),S=r.getUrlQueryString=function(r,e){return v(e)[r]};r.navigateTo=function(r,e){return l(r,1<arguments.length&&void 0!==e?e:{},"navigateTo")},r.redirectTo=function(r,e){return l(r,1<arguments.length&&void 0!==e?e:{},"redirectTo")},r.switchTab=function(r){var e=S("env",r);return e&&g.default.setStorageSync("env",e),l(r,{},"switchTab")},r.navigateBack=function(r){g.default.navigateBack(r)},r.reLaunch=function(r,e){return l(r,1<arguments.length&&void 0!==e?e:{},"reLaunch")}}(exports,require,Object,Array,RegExp);