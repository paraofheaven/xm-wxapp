"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.delayGetScrollOffset=exports.delayGetClientRect=exports.handleTouchScroll=exports.pxTransform=exports.isTest=exports.initTestEnv=exports.getEventDetail=exports.uuid=exports.delayQuerySelector=exports.delay=void 0;var _index=require("../../../../@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ENV=_index2.default.getEnv();function delay(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;return new Promise(function(e){[_index2.default.ENV_TYPE.WEB,_index2.default.ENV_TYPE.SWAN].includes(ENV)?setTimeout(function(){e()},t):e()})}function delayQuerySelector(e,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500,t=ENV===_index2.default.ENV_TYPE.WEB?e:e.$scope,l=_index2.default.createSelectorQuery().in(t);return new Promise(function(t){delay(o).then(function(){l.select(n).boundingClientRect().exec(function(e){t(e)})})})}function delayGetScrollOffset(e){var t=e.delayTime,n=void 0===t?500:t;return new Promise(function(t){delay(n).then(function(){_index2.default.createSelectorQuery().selectViewport().scrollOffset().exec(function(e){t(e)})})})}function delayGetClientRect(e){var t=e.self,n=e.selectorStr,o=e.delayTime,l=void 0===o?500:o,r=ENV===_index2.default.ENV_TYPE.WEB||ENV===_index2.default.ENV_TYPE.SWAN?t:t.$scope,a=_index2.default.createSelectorQuery().in(r);return new Promise(function(t){delay(l).then(function(){a.select(n).boundingClientRect().exec(function(e){t(e)})})})}function uuid(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[],l=0;if(t=t||n.length,e)for(l=0;l<e;l++)o[l]=n[0|Math.random()*t];else{var r=void 0;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",l=0;l<36;l++)o[l]||(r=0|16*Math.random(),o[l]=n[19===l?3&r|8:r])}return o.join("")}function getEventDetail(e){var t=void 0;switch(ENV){case _index2.default.ENV_TYPE.WEB:t={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,x:e.x,y:e.y};break;case _index2.default.ENV_TYPE.WEAPP:t={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,offsetX:e.target.offsetLeft,offsetY:e.target.offsetTop,x:e.target.x,y:e.target.y};break;case _index2.default.ENV_TYPE.ALIPAY:t={pageX:e.target.pageX,pageY:e.target.pageY,clientX:e.target.clientX,clientY:e.target.clientY,offsetX:e.target.offsetLeft,offsetY:e.target.offsetTop,x:e.target.x,y:e.target.y};break;case _index2.default.ENV_TYPE.SWAN:t={pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,clientX:e.target.clientX,clientY:e.target.clientY,offsetX:e.target.offsetLeft,offsetY:e.target.offsetTop,x:e.detail.x,y:e.detail.y};break;default:t={pageX:0,pageY:0,clientX:0,clientY:0,offsetX:0,offsetY:0,x:0,y:0},console.warn("getEventDetail暂未支持该环境")}return t}function initTestEnv(){}function isTest(){return!1}var scrollTop=0;function handleTouchScroll(e){ENV===_index2.default.ENV_TYPE.WEB&&(e?(scrollTop=document.documentElement.scrollTop,document.body.classList.add("at-frozen"),document.body.style.top=-scrollTop+"px"):(document.body.style.top=null,document.body.classList.remove("at-frozen"),document.documentElement.scrollTop=scrollTop))}function pxTransform(e){return e?_index2.default.pxTransform(e):""}exports.delay=delay,exports.delayQuerySelector=delayQuerySelector,exports.uuid=uuid,exports.getEventDetail=getEventDetail,exports.initTestEnv=initTestEnv,exports.isTest=isTest,exports.pxTransform=pxTransform,exports.handleTouchScroll=handleTouchScroll,exports.delayGetClientRect=delayGetClientRect,exports.delayGetScrollOffset=delayGetScrollOffset;